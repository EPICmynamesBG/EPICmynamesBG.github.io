function GridStyle(){}var app=angular.module("app",["ui.router","ngAnimate"]);app.run(function($rootScope,$state,$timeout,$preload){$rootScope.endAnimation=!1,$timeout(function(){$rootScope.endAnimation=!0},3300),$rootScope.$state=$state,$rootScope.loading=!1,$rootScope.modalData={},$(".button-collapse").sideNav({closeOnClick:!0}),$rootScope.$on("$stateChangeStart",function(evt,to,params){to.redirectTo&&(evt.preventDefault(),$state.go(to.redirectTo,params,{location:"replace"}))})}),app.config(function($stateProvider,$urlRouterProvider,$locationProvider){$locationProvider.html5Mode({enabled:!0,requireBase:!0}),$urlRouterProvider.otherwise("/"),$stateProvider.state("Home",{url:"/",templateUrl:"views/home.html",controller:"HomeController",data:{}}).state("About",{url:"/about",templateUrl:"views/about.html",controller:"AboutController",data:{}}).state("Experience",{url:"/experience",templateUrl:"views/experience.html",controller:"ExperienceController",data:{}}).state("Projects",{url:"/projects",templateUrl:"views/projects.html",controller:"ProjectsController",redirectTo:"Projects.All",data:{}}).state("Projects.All",{parent:"Projects",project:"/all",url:"/all?style",templateUrl:"views/projects/all.html",controller:"ProjectsAllController",data:{}}).state("Projects.Detail",{parent:"Projects",url:"/:projectName",templateUrl:"views/projects/details.html",controller:"ProjectsDetailsController",data:{}})}),app.controller("AboutController",function($scope,$json){$json.loadFile("information/general").success(function(data){$scope.generalInfo=data}).error(function(error){console.log(error)})}),app.controller("ExperienceController",function($scope,$json){$json.loadFile("information/work").success(function(data){$scope.workHistory=data,$(".collapsible").collapsible()}).error(function(error){console.log(error)})}),app.controller("HomeController",function($scope){}),app.controller("NavController",function($scope){$(".button-collapse").sideNav({closeOnClick:!0})}),app.controller("ProjectsAllController",function($scope,$json,$stateParams,$state){$stateParams.style&&""!=$stateParams.style||($stateParams.style="tiles",$state.go("Projects.All",{style:$stateParams.style},{notify:!1,location:"replace"})),$scope.gridStyle=$stateParams.style,$json.loadFile("projects").success(function(data){$scope.projectList=data}).error(function(error){console.log(error)}),$scope.$watch("gridStyle",function(newVal,oldVal){newVal!=oldVal&&$state.go("Projects.All",{style:newVal},{notify:!1,location:"replace"})})}),app.controller("ProjectsController",function($scope,$json){}),app.controller("ProjectsDetailsController",function($scope,$stateParams,$json,$sce){var title=$json.formatTitle($stateParams.projectName);$json.loadFile("projects/"+title).then(function(response){$scope.project=response.data},function(response){$json.errorResponse(response)})}),app.service("$json",function($http){var location="json/",toTitleCase=function(str){return str.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()})};this.formatTitle=function(title){var temp=toTitleCase(title);return temp=temp.replace(/ /g,""),temp=temp.replace("(",""),temp=temp.replace(")",""),temp=temp.replace(/-/g,"")},this.loadFile=function(filename){return $http.get(location+filename+".json")},this.errorResponse=function(error){alert("An error occured loading the remote data. Please reload the page to try again."),console.log(error)}}),app.service("$preload",function($templateCache,$http){var views=["about","experience","home","projects","directives/carousel","directives/grid-list","directives/grid-tile","directives/grid","directives/navigation","projects/all","projects/details"],json=["information/general","information/work","projects"],projJson=["projects/AsteroidBlaster","projects/CharlieEatsWorms","projects/Godex","projects/Hackolantern","projects/Inbetween","projects/PlexmediaServer","projects/Pokemondb","projects/SimpleStudentDb","projects/Skbutton","projects/VirtualCommencementAdmin","projects/Wifiusb"],loadImages=function(jsonFile){for(var promArray=[],i=0;i<jsonFile.images.length;i++){var url=jsonFile.images[i],prom=$http.get("/assets/projects/"+url);promArray.push(prom)}return Promise.all(promArray)};this.loadAll=function(){var masterProm=new Promise(function(resolve,reject){for(var promArray=[],i=0;i<views.length;i++){var thisdir=views[i],prom=$http.get("views/"+thisdir+".html");promArray.push(prom)}for(var i=0;i<projJson.length;i++){var thisdir=projJson[i],prom=new Promise(function(resolve,reject){$http.get("json/"+thisdir+".json").then(function(response){var imgProm=loadImages(response.data);imgProm.then(function(values){values.push(response),resolve(values)},function(err){reject(err)})},function(error){reject(error)})});promArray.push(prom)}for(var i=0;i<json.length;i++){var thisdir=json[i],prom=$http.get("json/"+thisdir+".json");promArray.push(prom)}Promise.all(promArray).then(function(values){values.forEach(function(response){Array.isArray(response)?response.forEach(function(innerResponse){$templateCache.put(innerResponse.config.url,innerResponse.data)}):$templateCache.put(response.config.url,response.data)}),resolve("Success")},function(err){console.log(err),resolve(err)})});return masterProm}}),app.directive("backToTop",function(){return{restrict:"E",replace:!0,scope:{},template:'<div id="goToTop" class="btn btn-floating waves-effect waves-light" ng-click="toTop()"><i class="material-icons">keyboard_arrow_up</i></div>',link:function(scope,element,attrs){$(window).scroll(function(){$(this).scrollTop()>100?element.addClass("show"):element.removeClass("show"),$(window).width()<=750&&$(this).scrollTop()>=$(window).height()-1?element.addClass("upfix"):element.removeClass("upfix")}),scope.toTop=function(){return $("html, body").animate({scrollTop:0},600),!1}}}}),app.directive("carousel",function($interval){return{restrict:"A",replace:!0,scope:{imageArray:"="},templateUrl:"./views/directives/carousel.html",link:function(scope,element,attrs){var self=this;scope.paused=!1,scope.carouselIndex=0;var carouselTime=4500,init=function(){self.carousel&&$interval.cancel(self.carousel),self.carousel=$interval(function(){scope.paused||(scope.carouselIndex+=1,scope.imageArray.length==scope.carouselIndex&&(scope.carouselIndex=0))},carouselTime)};scope.$watch("imageArray",function(newValue){newValue&&init()}),scope.togglePlayback=function(){scope.paused=!scope.paused}}}}),GridStyle.List="list",GridStyle.Tiles="grid",app.directive("grid",function(){return{restrict:"E",replace:!0,transclude:!1,scope:{data:"=",gridStyle:"="},templateUrl:"./views/directives/grid.html",link:function(scope,element,attrs){scope.gridStyle||(scope.gridStyle=GridStyle.Tiles),scope.setStyle=function(newStyle){scope.gridStyle=newStyle}}}}),app.directive("gridList",function(){return{restrict:"E",replace:!0,scope:{project:"="},templateUrl:"./views/directives/grid-list.html",link:function(scope,element,attrs){}}}),app.directive("gridTile",function(){return{restrict:"E",replace:!0,scope:{project:"="},templateUrl:"./views/directives/grid-tile.html",link:function(scope,element,attrs){}}}),app.directive("mAppLoading",function($animate,$rootScope){function link(scope,element,attributes){$animate.enabled(!0),$rootScope.$watch("endAnimation",function(newVal){newVal&&$animate.leave(element.children().eq(1)).then(function(){element.remove(),scope=element=attributes=null})})}return{link:link,restrict:"C"}}),app.directive("navigation",function(){return{restrict:"E",transclude:!1,scope:{project:"="},templateUrl:"./views/directives/navigation.html",link:function(scope,element,attrs){},controller:"NavController"}}),app.filter("rawHtml",["$sce",function($sce){return function(val){return $sce.trustAsHtml(val)}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpcmVjdGl2ZXMvZ3JpZC5qcyIsImFwcC5qcyIsImNvbnRyb2xsZXJzL0Fib3V0Q29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL0V4cGVyaWVuY2VDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvSG9tZUNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9OYXZDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvUHJvamVjdHNBbGxDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvUHJvamVjdHNDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvUHJvamVjdHNEZXRhaWxzQ29udHJvbGxlci5qcyIsInNlcnZpY2VzL2pzb24uanMiLCJzZXJ2aWNlcy9wcmVsb2FkLmpzIiwiZGlyZWN0aXZlcy9iYWNrVG9Ub3AuanMiLCJkaXJlY3RpdmVzL2Nhcm91c2VsLmpzIiwiZGlyZWN0aXZlcy9ncmlkTGlzdC5qcyIsImRpcmVjdGl2ZXMvZ3JpZFRpbGUuanMiLCJkaXJlY3RpdmVzL21BcHBMb2FkaW5nLmpzIiwiZGlyZWN0aXZlcy9uYXZpZ2F0aW9uLmpzIiwiZmlsdGVycy9yYXdIdG1sLmpzIl0sIm5hbWVzIjpbIkdyaWRTdHlsZSIsImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJydW4iLCIkcm9vdFNjb3BlIiwiJHN0YXRlIiwiJHRpbWVvdXQiLCIkcHJlbG9hZCIsImVuZEFuaW1hdGlvbiIsImxvYWRpbmciLCJtb2RhbERhdGEiLCIkIiwic2lkZU5hdiIsImNsb3NlT25DbGljayIsIiRvbiIsImV2dCIsInRvIiwicGFyYW1zIiwicmVkaXJlY3RUbyIsInByZXZlbnREZWZhdWx0IiwiZ28iLCJsb2NhdGlvbiIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJodG1sNU1vZGUiLCJlbmFibGVkIiwicmVxdWlyZUJhc2UiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsImRhdGEiLCJwYXJlbnQiLCJwcm9qZWN0IiwiJHNjb3BlIiwiJGpzb24iLCJsb2FkRmlsZSIsInN1Y2Nlc3MiLCJnZW5lcmFsSW5mbyIsImVycm9yIiwiY29uc29sZSIsImxvZyIsIndvcmtIaXN0b3J5IiwiY29sbGFwc2libGUiLCIkc3RhdGVQYXJhbXMiLCJzdHlsZSIsIm5vdGlmeSIsImdyaWRTdHlsZSIsInByb2plY3RMaXN0IiwiJHdhdGNoIiwibmV3VmFsIiwib2xkVmFsIiwiJHNjZSIsInRpdGxlIiwiZm9ybWF0VGl0bGUiLCJwcm9qZWN0TmFtZSIsInRoZW4iLCJyZXNwb25zZSIsImVycm9yUmVzcG9uc2UiLCJzZXJ2aWNlIiwiJGh0dHAiLCJ0b1RpdGxlQ2FzZSIsInN0ciIsInJlcGxhY2UiLCJ0eHQiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInN1YnN0ciIsInRvTG93ZXJDYXNlIiwidGhpcyIsInRlbXAiLCJmaWxlbmFtZSIsImdldCIsImFsZXJ0IiwiJHRlbXBsYXRlQ2FjaGUiLCJ2aWV3cyIsImpzb24iLCJwcm9qSnNvbiIsImxvYWRJbWFnZXMiLCJqc29uRmlsZSIsInByb21BcnJheSIsImkiLCJpbWFnZXMiLCJsZW5ndGgiLCJwcm9tIiwicHVzaCIsIlByb21pc2UiLCJhbGwiLCJsb2FkQWxsIiwibWFzdGVyUHJvbSIsInJlc29sdmUiLCJyZWplY3QiLCJ0aGlzZGlyIiwiaW1nUHJvbSIsInZhbHVlcyIsImVyciIsImZvckVhY2giLCJBcnJheSIsImlzQXJyYXkiLCJpbm5lclJlc3BvbnNlIiwicHV0IiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJzY29wZSIsInRlbXBsYXRlIiwibGluayIsImVsZW1lbnQiLCJhdHRycyIsIndpbmRvdyIsInNjcm9sbCIsInNjcm9sbFRvcCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJ3aWR0aCIsImhlaWdodCIsInRvVG9wIiwiYW5pbWF0ZSIsIiRpbnRlcnZhbCIsImltYWdlQXJyYXkiLCJzZWxmIiwicGF1c2VkIiwiY2Fyb3VzZWxJbmRleCIsImNhcm91c2VsVGltZSIsImluaXQiLCJjYXJvdXNlbCIsImNhbmNlbCIsIm5ld1ZhbHVlIiwidG9nZ2xlUGxheWJhY2siLCJMaXN0IiwiVGlsZXMiLCJ0cmFuc2NsdWRlIiwic2V0U3R5bGUiLCJuZXdTdHlsZSIsIiRhbmltYXRlIiwiYXR0cmlidXRlcyIsImxlYXZlIiwiY2hpbGRyZW4iLCJlcSIsInJlbW92ZSIsImZpbHRlciIsInZhbCIsInRydXN0QXNIdG1sIl0sIm1hcHBpbmdzIjoiQUFBQSxRQUFBQSxjQ0FBLEdBQUFDLEtBQUFDLFFBQUFDLE9BQUEsT0FBQSxZQUFBLGFBUUFGLEtBQUFHLElBQUEsU0FBQUMsV0FBQUMsT0FBQUMsU0FBQUMsVUFDQUgsV0FBQUksY0FBQSxFQUVBRixTQUFBLFdBQ0FGLFdBQUFJLGNBQUEsR0FDQSxNQUVBSixXQUFBQyxPQUFBQSxPQUNBRCxXQUFBSyxTQUFBLEVBQ0FMLFdBQUFNLGFBQ0FDLEVBQUEsb0JBQUFDLFNBQ0FDLGNBQUEsSUFTQVQsV0FBQVUsSUFBQSxvQkFBQSxTQUFBQyxJQUFBQyxHQUFBQyxRQUNBRCxHQUFBRSxhQUNBSCxJQUFBSSxpQkFDQWQsT0FBQWUsR0FBQUosR0FBQUUsV0FBQUQsUUFDQUksU0FBQSxpQkFTQXJCLElBQUFzQixPQUFBLFNBQUFDLGVBQUFDLG1CQUFBQyxtQkFFQUEsa0JBQUFDLFdBQ0FDLFNBQUEsRUFDQUMsYUFBQSxJQUdBSixtQkFBQUssVUFBQSxLQUVBTixlQUNBTyxNQUFBLFFBQ0FDLElBQUEsSUFDQUMsWUFBQSxrQkFDQUMsV0FBQSxpQkFDQUMsVUFFQUosTUFBQSxTQUNBQyxJQUFBLFNBQ0FDLFlBQUEsbUJBQ0FDLFdBQUEsa0JBQ0FDLFVBRUFKLE1BQUEsY0FDQUMsSUFBQSxjQUNBQyxZQUFBLHdCQUNBQyxXQUFBLHVCQUNBQyxVQUVBSixNQUFBLFlBQ0FDLElBQUEsWUFDQUMsWUFBQSxzQkFDQUMsV0FBQSxxQkFDQWYsV0FBQSxlQUNBZ0IsVUFFQUosTUFBQSxnQkFDQUssT0FBQSxXQUNBQyxRQUFBLE9BQ0FMLElBQUEsYUFDQUMsWUFBQSwwQkFDQUMsV0FBQSx3QkFDQUMsVUFFQUosTUFBQSxtQkFDQUssT0FBQSxXQUNBSixJQUFBLGdCQUNBQyxZQUFBLDhCQUNBQyxXQUFBLDRCQUNBQyxZQ3pGQWxDLElBQUFpQyxXQUFBLGtCQUFBLFNBQUFJLE9BQUFDLE9BRUFBLE1BQUFDLFNBQUEsdUJBQ0FDLFFBQUEsU0FBQU4sTUFDQUcsT0FBQUksWUFBQVAsT0FFQVEsTUFBQSxTQUFBQSxPQUNBQyxRQUFBQyxJQUFBRixXQ1BBMUMsSUFBQWlDLFdBQUEsdUJBQUEsU0FBQUksT0FBQUMsT0FDQUEsTUFBQUMsU0FBQSxvQkFDQUMsUUFBQSxTQUFBTixNQUNBRyxPQUFBUSxZQUFBWCxLQUNBdkIsRUFBQSxnQkFBQW1DLGdCQUVBSixNQUFBLFNBQUFBLE9BQ0FDLFFBQUFDLElBQUFGLFdDUEExQyxJQUFBaUMsV0FBQSxpQkFBQSxTQUFBSSxXQ0FBckMsSUFBQWlDLFdBQUEsZ0JBQUEsU0FBQUksUUFFQTFCLEVBQUEsb0JBQUFDLFNBQ0FDLGNBQUEsTUNIQWIsSUFBQWlDLFdBQUEsd0JBQUEsU0FBQUksT0FBQUMsTUFBQVMsYUFBQTFDLFFBRUEwQyxhQUFBQyxPQUFBLElBQUFELGFBQUFDLFFBQ0FELGFBQUFDLE1BQUEsUUFFQTNDLE9BQUFlLEdBQUEsZ0JBQ0E0QixNQUFBRCxhQUFBQyxRQUVBQyxRQUFBLEVBQ0E1QixTQUFBLGFBSUFnQixPQUFBYSxVQUFBSCxhQUFBQyxNQUVBVixNQUFBQyxTQUFBLFlBQ0FDLFFBQUEsU0FBQU4sTUFDQUcsT0FBQWMsWUFBQWpCLE9BRUFRLE1BQUEsU0FBQUEsT0FDQUMsUUFBQUMsSUFBQUYsU0FJQUwsT0FBQWUsT0FBQSxZQUFBLFNBQUFDLE9BQUFDLFFBQ0FELFFBQUFDLFFBQ0FqRCxPQUFBZSxHQUFBLGdCQUNBNEIsTUFBQUssU0FFQUosUUFBQSxFQUNBNUIsU0FBQSxnQkM5QkFyQixJQUFBaUMsV0FBQSxxQkFBQSxTQUFBSSxPQUFBQyxVQ0FBdEMsSUFBQWlDLFdBQUEsNEJBQUEsU0FBQUksT0FBQVUsYUFBQVQsTUFBQWlCLE1BRUEsR0FBQUMsT0FBQWxCLE1BQUFtQixZQUFBVixhQUFBVyxZQUVBcEIsT0FBQUMsU0FBQSxZQUFBaUIsT0FDQUcsS0FBQSxTQUFBQyxVQUNBdkIsT0FBQUQsUUFBQXdCLFNBQUExQixNQUNBLFNBQUEwQixVQUNBdEIsTUFBQXVCLGNBQUFELGNDUkE1RCxJQUFBOEQsUUFBQSxRQUFBLFNBQUFDLE9BRUEsR0FBQTFDLFVBQUEsUUFFQTJDLFlBQUEsU0FBQUMsS0FDQSxNQUFBQSxLQUFBQyxRQUFBLFNBQUEsU0FBQUMsS0FDQSxNQUFBQSxLQUFBQyxPQUFBLEdBQUFDLGNBQUFGLElBQUFHLE9BQUEsR0FBQUMsZ0JBSUFDLE1BQUFmLFlBQUEsU0FBQUQsT0FDQSxHQUFBaUIsTUFBQVQsWUFBQVIsTUFLQSxPQUpBaUIsTUFBQUEsS0FBQVAsUUFBQSxLQUFBLElBQ0FPLEtBQUFBLEtBQUFQLFFBQUEsSUFBQSxJQUNBTyxLQUFBQSxLQUFBUCxRQUFBLElBQUEsSUFDQU8sS0FBQUEsS0FBQVAsUUFBQSxLQUFBLEtBSUFNLEtBQUFqQyxTQUFBLFNBQUFtQyxVQUNBLE1BQUFYLE9BQUFZLElBQUF0RCxTQUFBcUQsU0FBQSxVQUdBRixLQUFBWCxjQUFBLFNBQUFuQixPQUNBa0MsTUFBQSxrRkFDQWpDLFFBQUFDLElBQUFGLFVDekJBMUMsSUFBQThELFFBQUEsV0FBQSxTQUFBZSxlQUFBZCxPQUVBLEdBRUFlLFFBQ0EsUUFDQSxhQUNBLE9BQ0EsV0FDQSxzQkFDQSx1QkFDQSx1QkFDQSxrQkFDQSx3QkFDQSxlQUNBLG9CQUdBQyxNQUNBLHNCQUlBLG1CQUVBLFlBR0FDLFVBQ0EsMkJBSUEsNEJBRUEsaUJBQ0Esd0JBQ0EscUJBSUEsMkJBQ0EscUJBQ0EsMkJBQ0Esb0JBQ0Esb0NBQ0Esb0JBVUFDLFdBQUEsU0FBQUMsVUFFQSxJQUFBLEdBREFDLGNBQ0FDLEVBQUEsRUFBQUEsRUFBQUYsU0FBQUcsT0FBQUMsT0FBQUYsSUFBQSxDQUNBLEdBQUFyRCxLQUFBbUQsU0FBQUcsT0FBQUQsR0FDQUcsS0FBQXhCLE1BQUFZLElBQUEsb0JBQUE1QyxJQUNBb0QsV0FBQUssS0FBQUQsTUFFQSxNQUFBRSxTQUFBQyxJQUFBUCxXQVFBWCxNQUFBbUIsUUFBQSxXQUNBLEdBQUFDLFlBQUEsR0FBQUgsU0FBQSxTQUFBSSxRQUFBQyxRQUtBLElBQUEsR0FIQVgsY0FHQUMsRUFBQSxFQUFBQSxFQUFBTixNQUFBUSxPQUFBRixJQUFBLENBQ0EsR0FBQVcsU0FBQWpCLE1BQUFNLEdBQ0FHLEtBQUF4QixNQUFBWSxJQUFBLFNBQUFvQixRQUFBLFFBQ0FaLFdBQUFLLEtBQUFELE1BSUEsSUFBQSxHQUFBSCxHQUFBLEVBQUFBLEVBQUFKLFNBQUFNLE9BQUFGLElBQUEsQ0FDQSxHQUFBVyxTQUFBZixTQUFBSSxHQUNBRyxLQUFBLEdBQUFFLFNBQUEsU0FBQUksUUFBQUMsUUFDQS9CLE1BQUFZLElBQUEsUUFBQW9CLFFBQUEsU0FDQXBDLEtBQUEsU0FBQUMsVUFFQSxHQUFBb0MsU0FBQWYsV0FBQXJCLFNBQUExQixLQUNBOEQsU0FBQXJDLEtBQUEsU0FBQXNDLFFBRUFBLE9BQUFULEtBQUE1QixVQUNBaUMsUUFBQUksU0FDQSxTQUFBQyxLQUNBSixPQUFBSSxRQUdBLFNBQUF4RCxPQUNBb0QsT0FBQXBELFVBR0F5QyxXQUFBSyxLQUFBRCxNQUlBLElBQUEsR0FBQUgsR0FBQSxFQUFBQSxFQUFBTCxLQUFBTyxPQUFBRixJQUFBLENBQ0EsR0FBQVcsU0FBQWhCLEtBQUFLLEdBQ0FHLEtBQUF4QixNQUFBWSxJQUFBLFFBQUFvQixRQUFBLFFBQ0FaLFdBQUFLLEtBQUFELE1BSUFFLFFBQUFDLElBQUFQLFdBQUF4QixLQUFBLFNBQUFzQyxRQUNBQSxPQUFBRSxRQUFBLFNBQUF2QyxVQUNBd0MsTUFBQUMsUUFBQXpDLFVBQ0FBLFNBQUF1QyxRQUFBLFNBQUFHLGVBQ0F6QixlQUFBMEIsSUFBQUQsY0FBQWhGLE9BQUFTLElBQUF1RSxjQUFBcEUsUUFHQTJDLGVBQUEwQixJQUFBM0MsU0FBQXRDLE9BQUFTLElBQUE2QixTQUFBMUIsUUFHQTJELFFBQUEsWUFDQSxTQUFBSyxLQUNBdkQsUUFBQUMsSUFBQXNELEtBQ0FMLFFBQUFLLFFBSUEsT0FBQU4sZUNuSUE1RixJQUFBd0csVUFBQSxZQUFBLFdBQ0EsT0FDQUMsU0FBQSxJQUNBdkMsU0FBQSxFQUNBd0MsU0FDQUMsU0FBQSwrSUFDQUMsS0FBQSxTQUFBRixNQUFBRyxRQUFBQyxPQUNBbkcsRUFBQW9HLFFBQUFDLE9BQUEsV0FDQXJHLEVBQUE2RCxNQUFBeUMsWUFBQSxJQUNBSixRQUFBSyxTQUFBLFFBR0FMLFFBQUFNLFlBQUEsUUFHQXhHLEVBQUFvRyxRQUFBSyxTQUFBLEtBQ0F6RyxFQUFBNkQsTUFBQXlDLGFBQUF0RyxFQUFBb0csUUFBQU0sU0FBQSxFQUNBUixRQUFBSyxTQUFBLFNBTUFMLFFBQUFNLFlBQUEsV0FHQVQsTUFBQVksTUFBQSxXQUlBLE1BSEEzRyxHQUFBLGNBQUE0RyxTQUNBTixVQUFBLEdBQ0EsTUFDQSxPQzlCQWpILElBQUF3RyxVQUFBLFdBQUEsU0FBQWdCLFdBQ0EsT0FDQWYsU0FBQSxJQUNBdkMsU0FBQSxFQUNBd0MsT0FDQWUsV0FBQSxLQUVBekYsWUFBQSxtQ0FDQTRFLEtBQUEsU0FBQUYsTUFBQUcsUUFBQUMsT0FFQSxHQUFBWSxNQUFBbEQsSUFFQWtDLE9BQUFpQixRQUFBLEVBSUFqQixNQUFBa0IsY0FBQSxDQUVBLElBQUFDLGNBQUEsS0FFQUMsS0FBQSxXQUNBSixLQUFBSyxVQUNBUCxVQUFBUSxPQUFBTixLQUFBSyxVQUdBTCxLQUFBSyxTQUFBUCxVQUFBLFdBQ0FkLE1BQUFpQixTQUdBakIsTUFBQWtCLGVBQUEsRUFDQWxCLE1BQUFlLFdBQUFuQyxRQUFBb0IsTUFBQWtCLGdCQUNBbEIsTUFBQWtCLGNBQUEsS0FFQUMsY0FHQW5CLE9BQUF0RCxPQUFBLGFBQUEsU0FBQTZFLFVBQ0FBLFVBQ0FILFNBU0FwQixNQUFBd0IsZUFBQSxXQUNBeEIsTUFBQWlCLFFBQUFqQixNQUFBaUIsWVo5Q0E1SCxVQUFBb0ksS0FBQSxPQUVBcEksVUFBQXFJLE1BQUEsT0FFQXBJLElBQUF3RyxVQUFBLE9BQUEsV0FDQSxPQUNBQyxTQUFBLElBQ0F2QyxTQUFBLEVBQ0FtRSxZQUFBLEVBQ0EzQixPQUNBeEUsS0FBQSxJQUNBZ0IsVUFBQSxLQUVBbEIsWUFBQSwrQkFDQTRFLEtBQUEsU0FBQUYsTUFBQUcsUUFBQUMsT0FDQUosTUFBQXhELFlBQ0F3RCxNQUFBeEQsVUFBQW5ELFVBQUFxSSxPQUdBMUIsTUFBQTRCLFNBQUEsU0FBQUMsVUFDQTdCLE1BQUF4RCxVQUFBcUYsY2F0QkF2SSxJQUFBd0csVUFBQSxXQUFBLFdBQ0EsT0FDQUMsU0FBQSxJQUNBdkMsU0FBQSxFQUNBd0MsT0FDQXRFLFFBQUEsS0FFQUosWUFBQSxvQ0FDQTRFLEtBQUEsU0FBQUYsTUFBQUcsUUFBQUMsWUNSQTlHLElBQUF3RyxVQUFBLFdBQUEsV0FDQSxPQUNBQyxTQUFBLElBQ0F2QyxTQUFBLEVBQ0F3QyxPQUNBdEUsUUFBQSxLQUVBSixZQUFBLG9DQUNBNEUsS0FBQSxTQUFBRixNQUFBRyxRQUFBQyxZQ1JBOUcsSUFBQXdHLFVBQUEsY0FBQSxTQUFBZ0MsU0FBQXBJLFlBRUEsUUFBQXdHLE1BQUFGLE1BQUFHLFFBQUE0QixZQU9BRCxTQUFBN0csU0FBQSxHQUVBdkIsV0FBQWdELE9BQUEsZUFBQSxTQUFBQyxRQUNBQSxRQUNBbUYsU0FBQUUsTUFBQTdCLFFBQUE4QixXQUFBQyxHQUFBLElBQUFqRixLQUNBLFdBRUFrRCxRQUFBZ0MsU0FFQW5DLE1BQUFHLFFBQUE0QixXQUFBLFNBVUEsT0FDQTdCLEtBQUFBLEtBQ0FILFNBQUEsT0M5QkF6RyxJQUFBd0csVUFBQSxhQUFBLFdBQ0EsT0FDQUMsU0FBQSxJQUNBNEIsWUFBQSxFQUNBM0IsT0FDQXRFLFFBQUEsS0FFQUosWUFBQSxxQ0FDQTRFLEtBQUEsU0FBQUYsTUFBQUcsUUFBQUMsU0FHQTdFLFdBQUEsbUJDWEFqQyxJQUFBOEksT0FBQSxXQUFBLE9BQUEsU0FBQXZGLE1BQ0EsTUFBQSxVQUFBd0YsS0FDQSxNQUFBeEYsTUFBQXlGLFlBQUFEIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBHcmlkU3R5bGUoKSB7IH1cblxuR3JpZFN0eWxlLkxpc3QgPSAnbGlzdCc7XG5cbkdyaWRTdHlsZS5UaWxlcyA9ICdncmlkJztcblxuYXBwLmRpcmVjdGl2ZSgnZ3JpZCcsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHJlcGxhY2U6IHRydWUsXG4gICAgdHJhbnNjbHVkZTogZmFsc2UsXG4gICAgc2NvcGU6IHtcbiAgICAgIGRhdGE6ICc9JyxcbiAgICAgIGdyaWRTdHlsZTogJz0nXG4gICAgfSxcbiAgICB0ZW1wbGF0ZVVybDogJy4vdmlld3MvZGlyZWN0aXZlcy9ncmlkLmh0bWwnLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycyl7XG4gICAgICBpZiAoIXNjb3BlLmdyaWRTdHlsZSl7XG4gICAgICAgIHNjb3BlLmdyaWRTdHlsZSA9IEdyaWRTdHlsZS5UaWxlcztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgc2NvcGUuc2V0U3R5bGUgPSBmdW5jdGlvbihuZXdTdHlsZSkge1xuICAgICAgICBzY29wZS5ncmlkU3R5bGUgPSBuZXdTdHlsZTtcbiAgICAgIH07XG4gICAgICBcbiAgICB9XG4vLyAgICBjb250cm9sbGVyOiAnTmF2Q29udHJvbGxlcidcbiAgfVxufSk7IiwidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ3VpLnJvdXRlcicsICduZ0FuaW1hdGUnXSk7XG5cbi8vc2V0VGltZW91dChcbi8vICBmdW5jdGlvbiBhc3luY0Jvb3RzdHJhcCgpIHtcbi8vICAgIGFuZ3VsYXIuYm9vdHN0cmFwKGRvY3VtZW50LCBbXCJhcHBcIl0pO1xuLy8gIH0sICgzLjMgKiAxMDAwKVxuLy8pO1xuXG5hcHAucnVuKGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkc3RhdGUsICR0aW1lb3V0LCAkcHJlbG9hZCkge1xuICAkcm9vdFNjb3BlLmVuZEFuaW1hdGlvbiA9IGZhbHNlO1xuXG4gICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAkcm9vdFNjb3BlLmVuZEFuaW1hdGlvbiA9IHRydWU7XG4gIH0sIDMzMDApOyAvLzMuM3NlY1xuXG4gICRyb290U2NvcGUuJHN0YXRlID0gJHN0YXRlO1xuICAkcm9vdFNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgJHJvb3RTY29wZS5tb2RhbERhdGEgPSB7fTtcbiAgJChcIi5idXR0b24tY29sbGFwc2VcIikuc2lkZU5hdih7XG4gICAgY2xvc2VPbkNsaWNrOiB0cnVlXG4gIH0pO1xuXG4vLyAgJHByZWxvYWQubG9hZEFsbCgpLnRoZW4oZnVuY3Rpb24gKHN1Y2Nlc3MpIHtcbi8vICAgIGNvbnNvbGUubG9nKFwiUHJlbG9hZFwiLCBzdWNjZXNzKTtcbi8vICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbi8vICAgIGNvbnNvbGUubG9nKFwiUHJlbG9hZFwiLCBlcnJvcik7XG4vLyAgfSk7XG5cbiAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN0YXJ0JywgZnVuY3Rpb24gKGV2dCwgdG8sIHBhcmFtcykge1xuICAgIGlmICh0by5yZWRpcmVjdFRvKSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICRzdGF0ZS5nbyh0by5yZWRpcmVjdFRvLCBwYXJhbXMsIHtcbiAgICAgICAgbG9jYXRpb246ICdyZXBsYWNlJ1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn0pO1xuXG5cbi8qIC0tLSBSb3V0aW5nIC0tLSAqL1xuXG5hcHAuY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuXG4gICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh7XG4gICAgZW5hYmxlZDogdHJ1ZSxcbiAgICByZXF1aXJlQmFzZTogdHJ1ZVxuICB9KTtcblxuICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKFwiL1wiKTtcblxuICAkc3RhdGVQcm92aWRlclxuICAgIC5zdGF0ZSgnSG9tZScsIHtcbiAgICAgIHVybDogJy8nLFxuICAgICAgdGVtcGxhdGVVcmw6IFwidmlld3MvaG9tZS5odG1sXCIsXG4gICAgICBjb250cm9sbGVyOiAnSG9tZUNvbnRyb2xsZXInLFxuICAgICAgZGF0YToge31cbiAgICB9KVxuICAgIC5zdGF0ZSgnQWJvdXQnLCB7XG4gICAgICB1cmw6ICcvYWJvdXQnLFxuICAgICAgdGVtcGxhdGVVcmw6IFwidmlld3MvYWJvdXQuaHRtbFwiLFxuICAgICAgY29udHJvbGxlcjogJ0Fib3V0Q29udHJvbGxlcicsXG4gICAgICBkYXRhOiB7fVxuICAgIH0pXG4gICAgLnN0YXRlKCdFeHBlcmllbmNlJywge1xuICAgICAgdXJsOiAnL2V4cGVyaWVuY2UnLFxuICAgICAgdGVtcGxhdGVVcmw6IFwidmlld3MvZXhwZXJpZW5jZS5odG1sXCIsXG4gICAgICBjb250cm9sbGVyOiAnRXhwZXJpZW5jZUNvbnRyb2xsZXInLFxuICAgICAgZGF0YToge31cbiAgICB9KVxuICAgIC5zdGF0ZSgnUHJvamVjdHMnLCB7XG4gICAgICB1cmw6IFwiL3Byb2plY3RzXCIsXG4gICAgICB0ZW1wbGF0ZVVybDogXCJ2aWV3cy9wcm9qZWN0cy5odG1sXCIsXG4gICAgICBjb250cm9sbGVyOiAnUHJvamVjdHNDb250cm9sbGVyJyxcbiAgICAgIHJlZGlyZWN0VG86ICdQcm9qZWN0cy5BbGwnLFxuICAgICAgZGF0YToge31cbiAgICB9KVxuICAgIC5zdGF0ZSgnUHJvamVjdHMuQWxsJywge1xuICAgICAgcGFyZW50OiAnUHJvamVjdHMnLFxuICAgICAgcHJvamVjdDogJy9hbGwnLFxuICAgICAgdXJsOiBcIi9hbGw/c3R5bGVcIixcbiAgICAgIHRlbXBsYXRlVXJsOiBcInZpZXdzL3Byb2plY3RzL2FsbC5odG1sXCIsXG4gICAgICBjb250cm9sbGVyOiAnUHJvamVjdHNBbGxDb250cm9sbGVyJyxcbiAgICAgIGRhdGE6IHt9XG4gICAgfSlcbiAgICAuc3RhdGUoJ1Byb2plY3RzLkRldGFpbCcsIHtcbiAgICAgIHBhcmVudDogJ1Byb2plY3RzJyxcbiAgICAgIHVybDogXCIvOnByb2plY3ROYW1lXCIsXG4gICAgICB0ZW1wbGF0ZVVybDogXCJ2aWV3cy9wcm9qZWN0cy9kZXRhaWxzLmh0bWxcIixcbiAgICAgIGNvbnRyb2xsZXI6ICdQcm9qZWN0c0RldGFpbHNDb250cm9sbGVyJyxcbiAgICAgIGRhdGE6IHt9XG4gICAgfSk7XG59KTsiLCJhcHAuY29udHJvbGxlcignQWJvdXRDb250cm9sbGVyJywgZnVuY3Rpb24gKCRzY29wZSwgJGpzb24pIHtcblxuICAkanNvbi5sb2FkRmlsZSgnaW5mb3JtYXRpb24vZ2VuZXJhbCcpXG4gICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICRzY29wZS5nZW5lcmFsSW5mbyA9IGRhdGE7XG4gICAgfSlcbiAgICAuZXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgfSk7XG5cbn0pOyIsImFwcC5jb250cm9sbGVyKCdFeHBlcmllbmNlQ29udHJvbGxlcicsIGZ1bmN0aW9uICgkc2NvcGUsICRqc29uKSB7XG4gICRqc29uLmxvYWRGaWxlKCdpbmZvcm1hdGlvbi93b3JrJylcbiAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgJHNjb3BlLndvcmtIaXN0b3J5ID0gZGF0YTtcbiAgICAgICQoJy5jb2xsYXBzaWJsZScpLmNvbGxhcHNpYmxlKCk7XG4gICAgfSlcbiAgICAuZXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgfSk7XG59KTsiLCJhcHAuY29udHJvbGxlcignSG9tZUNvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUpe1xuICBcbn0pOyIsImFwcC5jb250cm9sbGVyKCdOYXZDb250cm9sbGVyJywgZnVuY3Rpb24gKCRzY29wZSkge1xuXG4gICQoXCIuYnV0dG9uLWNvbGxhcHNlXCIpLnNpZGVOYXYoe1xuICAgIGNsb3NlT25DbGljazogdHJ1ZVxuICB9KTtcblxufSk7IiwiYXBwLmNvbnRyb2xsZXIoJ1Byb2plY3RzQWxsQ29udHJvbGxlcicsIGZ1bmN0aW9uICgkc2NvcGUsICRqc29uLCAkc3RhdGVQYXJhbXMsICRzdGF0ZSkge1xuXG4gIGlmICghJHN0YXRlUGFyYW1zLnN0eWxlIHx8ICRzdGF0ZVBhcmFtcy5zdHlsZSA9PSBcIlwiKSB7XG4gICAgJHN0YXRlUGFyYW1zLnN0eWxlID0gJ3RpbGVzJztcblxuICAgICRzdGF0ZS5nbygnUHJvamVjdHMuQWxsJywge1xuICAgICAgc3R5bGU6ICRzdGF0ZVBhcmFtcy5zdHlsZVxuICAgIH0sIHtcbiAgICAgIG5vdGlmeTogZmFsc2UsXG4gICAgICBsb2NhdGlvbjogXCJyZXBsYWNlXCJcbiAgICB9KTtcblxuICB9O1xuICAkc2NvcGUuZ3JpZFN0eWxlID0gJHN0YXRlUGFyYW1zLnN0eWxlO1xuXG4gICRqc29uLmxvYWRGaWxlKCdwcm9qZWN0cycpXG4gICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICRzY29wZS5wcm9qZWN0TGlzdCA9IGRhdGE7XG4gICAgfSlcbiAgICAuZXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgfSk7XG5cblxuICAkc2NvcGUuJHdhdGNoKCdncmlkU3R5bGUnLCBmdW5jdGlvbiAobmV3VmFsLCBvbGRWYWwpIHtcbiAgICBpZiAobmV3VmFsICE9IG9sZFZhbCkge1xuICAgICAgJHN0YXRlLmdvKCdQcm9qZWN0cy5BbGwnLCB7XG4gICAgICAgIHN0eWxlOiBuZXdWYWxcbiAgICAgIH0sIHtcbiAgICAgICAgbm90aWZ5OiBmYWxzZSxcbiAgICAgICAgbG9jYXRpb246IFwicmVwbGFjZVwiXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG5cbn0pOyIsImFwcC5jb250cm9sbGVyKCdQcm9qZWN0c0NvbnRyb2xsZXInLCBmdW5jdGlvbiAoJHNjb3BlLCAkanNvbikge1xuXG59KTsiLCJhcHAuY29udHJvbGxlcignUHJvamVjdHNEZXRhaWxzQ29udHJvbGxlcicsIGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZVBhcmFtcywgJGpzb24sICRzY2UpIHtcblxuICB2YXIgdGl0bGUgPSAkanNvbi5mb3JtYXRUaXRsZSgkc3RhdGVQYXJhbXMucHJvamVjdE5hbWUpO1xuXG4gICRqc29uLmxvYWRGaWxlKFwicHJvamVjdHMvXCIgKyB0aXRsZSlcbiAgICAudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcbiAgICAgICRzY29wZS5wcm9qZWN0ID0gcmVzcG9uc2UuZGF0YTtcbiAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3BvbnNlKSB7XG4gICAgICAkanNvbi5lcnJvclJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICB9KTtcblxuXG5cbn0pOyIsImFwcC5zZXJ2aWNlKFwiJGpzb25cIiwgZnVuY3Rpb24gKCRodHRwKSB7XG5cbiAgdmFyIGxvY2F0aW9uID0gXCJqc29uL1wiO1xuXG4gIHZhciB0b1RpdGxlQ2FzZSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1xcd1xcUyovZywgZnVuY3Rpb24gKHR4dCkge1xuICAgICAgcmV0dXJuIHR4dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHR4dC5zdWJzdHIoMSkudG9Mb3dlckNhc2UoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHRoaXMuZm9ybWF0VGl0bGUgPSBmdW5jdGlvbiAodGl0bGUpIHtcbiAgICB2YXIgdGVtcCA9IHRvVGl0bGVDYXNlKHRpdGxlKTtcbiAgICB0ZW1wID0gdGVtcC5yZXBsYWNlKC8gL2csIFwiXCIpO1xuICAgIHRlbXAgPSB0ZW1wLnJlcGxhY2UoXCIoXCIsIFwiXCIpO1xuICAgIHRlbXAgPSB0ZW1wLnJlcGxhY2UoXCIpXCIsIFwiXCIpO1xuICAgIHRlbXAgPSB0ZW1wLnJlcGxhY2UoLy0vZywgXCJcIik7XG4gICAgcmV0dXJuIHRlbXA7XG4gIH1cblxuICB0aGlzLmxvYWRGaWxlID0gZnVuY3Rpb24gKGZpbGVuYW1lKSB7XG4gICAgcmV0dXJuICRodHRwLmdldChsb2NhdGlvbiArIGZpbGVuYW1lICsgXCIuanNvblwiKTtcbiAgfVxuXG4gIHRoaXMuZXJyb3JSZXNwb25zZSA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgIGFsZXJ0KFwiQW4gZXJyb3Igb2NjdXJlZCBsb2FkaW5nIHRoZSByZW1vdGUgZGF0YS4gUGxlYXNlIHJlbG9hZCB0aGUgcGFnZSB0byB0cnkgYWdhaW4uXCIpO1xuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgfVxufSk7IiwiYXBwLnNlcnZpY2UoXCIkcHJlbG9hZFwiLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUsICRodHRwKSB7XG5cbiAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gIHZhciB2aWV3cyA9IFtcbiAgICAnYWJvdXQnLFxuICAgICdleHBlcmllbmNlJyxcbiAgICAnaG9tZScsXG4gICAgJ3Byb2plY3RzJyxcbiAgICAnZGlyZWN0aXZlcy9jYXJvdXNlbCcsXG4gICAgJ2RpcmVjdGl2ZXMvZ3JpZC1saXN0JyxcbiAgICAnZGlyZWN0aXZlcy9ncmlkLXRpbGUnLFxuICAgICdkaXJlY3RpdmVzL2dyaWQnLFxuICAgICdkaXJlY3RpdmVzL25hdmlnYXRpb24nLFxuICAgICdwcm9qZWN0cy9hbGwnLFxuICAgICdwcm9qZWN0cy9kZXRhaWxzJ1xuICBdO1xuXG4gIHZhciBqc29uID0gW1xuICAgICdpbmZvcm1hdGlvbi9nZW5lcmFsJyxcbi8vICAgICdpbmZvcm1hdGlvbi9pbnRlcmVzdHMnLFxuLy8gICAgJ2luZm9ybWF0aW9uL3BlcnNvbmFsaXR5VHJhaXRzJyxcbi8vICAgICdpbmZvcm1hdGlvbi9za2lsbHMnLFxuICAgICdpbmZvcm1hdGlvbi93b3JrJyxcbi8vICAgICdvbGRQcm9qZWN0cycsXG4gICAgJ3Byb2plY3RzJ1xuICBdO1xuXG4gIHZhciBwcm9qSnNvbiA9IFtcbiAgICAncHJvamVjdHMvQXN0ZXJvaWRCbGFzdGVyJyxcbi8vICAgICdwcm9qZWN0cy9BdWdtZW50ZWRSZWFsaXR5U2NhdmVuZ2VySHVudCcsXG4vLyAgICAncHJvamVjdHMvQm9tYm5hbnphJyxcbi8vICAgICdwcm9qZWN0cy9CdXp6ZWRCdWRkeScsXG4gICAgJ3Byb2plY3RzL0NoYXJsaWVFYXRzV29ybXMnLFxuLy8gICAgJ3Byb2plY3RzL0NvZGVPZktuaWdodGhvZGQnLFxuICAgICdwcm9qZWN0cy9Hb2RleCcsXG4gICAgJ3Byb2plY3RzL0hhY2tvbGFudGVybicsXG4gICAgJ3Byb2plY3RzL0luYmV0d2VlbicsXG4vLyAgICAncHJvamVjdHMvSW5iZXR3ZWVuaW9zJyxcbi8vICAgICdwcm9qZWN0cy9NY3Zlcmlsb2cnLFxuLy8gICAgJ3Byb2plY3RzL1BsYW50c0luU3BhY2UnLFxuICAgICdwcm9qZWN0cy9QbGV4bWVkaWFTZXJ2ZXInLFxuICAgICdwcm9qZWN0cy9Qb2tlbW9uZGInLFxuICAgICdwcm9qZWN0cy9TaW1wbGVTdHVkZW50RGInLFxuICAgICdwcm9qZWN0cy9Ta2J1dHRvbicsXG4gICAgJ3Byb2plY3RzL1ZpcnR1YWxDb21tZW5jZW1lbnRBZG1pbicsXG4gICAgJ3Byb2plY3RzL1dpZml1c2InXG4gIF1cblxuXG4gIC8qKlxuICAgKiBMb2FkIGFsbCBpbWFnZXMgZnJvbSB0aGUganNvblxuICAgKiBAYXV0aG9yIEJyYW5kb24gR3JvZmZcbiAgICogQHBhcmFtIHtPYmplY3R9ICBqc29uRmlsZSB0aGUgbG9hZGVkIGpzb24gZmlsZVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gYSBwcm9taXNlXG4gICAqL1xuICB2YXIgbG9hZEltYWdlcyA9IGZ1bmN0aW9uIChqc29uRmlsZSkge1xuICAgIHZhciBwcm9tQXJyYXkgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGpzb25GaWxlLmltYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHVybCA9IGpzb25GaWxlLmltYWdlc1tpXTtcbiAgICAgIHZhciBwcm9tID0gJGh0dHAuZ2V0KCcvYXNzZXRzL3Byb2plY3RzLycgKyB1cmwpO1xuICAgICAgcHJvbUFycmF5LnB1c2gocHJvbSk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9tQXJyYXkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBMb2FkIGFsbCB0ZW1wbGF0ZSBodG1sLGpzb24sIGFuZCBpbWFnZSBmaWxlcyBmb3IgZnV0dXJlIHVzZVxuICAgKiBAYXV0aG9yIEJyYW5kb24gR3JvZmZcbiAgICogQHJldHVybnMge1Byb21pc2V9IEEgUHJvbWlzZSB0aGF0IGFsd2F5cyByZXNvbHZlcyBzdWNjZXNzZnVsbHlcbiAgICovXG4gIHRoaXMubG9hZEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbWFzdGVyUHJvbSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblxuICAgICAgdmFyIHByb21BcnJheSA9IFtdO1xuXG4gICAgICAvL1ZpZXdzXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZpZXdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0aGlzZGlyID0gdmlld3NbaV07XG4gICAgICAgIHZhciBwcm9tID0gJGh0dHAuZ2V0KCd2aWV3cy8nICsgdGhpc2RpciArICcuaHRtbCcpO1xuICAgICAgICBwcm9tQXJyYXkucHVzaChwcm9tKTtcbiAgICAgIH1cblxuICAgICAgLy9Qcm9qSlNPTlxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9qSnNvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdGhpc2RpciA9IHByb2pKc29uW2ldO1xuICAgICAgICB2YXIgcHJvbSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAkaHR0cC5nZXQoJ2pzb24vJyArIHRoaXNkaXIgKyAnLmpzb24nKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgIC8vSW1hZ2VzXG4gICAgICAgICAgICAgIHZhciBpbWdQcm9tID0gbG9hZEltYWdlcyhyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICAgaW1nUHJvbS50aGVuKGZ1bmN0aW9uKHZhbHVlcykge1xuICAgICAgICAgICAgICAgIC8vYWRkIHRoaXMgaXRlbSBvciBpdCB3b24ndCBnZXQgY2FjaGVkXG4gICAgICAgICAgICAgICAgdmFsdWVzLnB1c2gocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUodmFsdWVzKTtcbiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcHJvbUFycmF5LnB1c2gocHJvbSk7XG4gICAgICB9XG5cbiAgICAgIC8vSlNPTlxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBqc29uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0aGlzZGlyID0ganNvbltpXTtcbiAgICAgICAgdmFyIHByb20gPSAkaHR0cC5nZXQoJ2pzb24vJyArIHRoaXNkaXIgKyAnLmpzb24nKTtcbiAgICAgICAgcHJvbUFycmF5LnB1c2gocHJvbSk7XG4gICAgICB9XG5cbiAgICAgIC8vRklOQUxMWSAtPiBzYXZlIHRoZW0gQUxMTExcbiAgICAgIFByb21pc2UuYWxsKHByb21BcnJheSkudGhlbihmdW5jdGlvbih2YWx1ZXMpIHtcbiAgICAgICAgdmFsdWVzLmZvckVhY2goZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzcG9uc2UpKSB7XG4gICAgICAgICAgICByZXNwb25zZS5mb3JFYWNoKGZ1bmN0aW9uIChpbm5lclJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICR0ZW1wbGF0ZUNhY2hlLnB1dChpbm5lclJlc3BvbnNlLmNvbmZpZy51cmwsIGlubmVyUmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHRlbXBsYXRlQ2FjaGUucHV0KHJlc3BvbnNlLmNvbmZpZy51cmwsIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJlc29sdmUoJ1N1Y2Nlc3MnKTtcbiAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICByZXNvbHZlKGVycik7XG4gICAgICB9KTtcblxuICAgIH0pO1xuICAgIHJldHVybiBtYXN0ZXJQcm9tO1xuICB9O1xuXG59KTsiLCJhcHAuZGlyZWN0aXZlKCdiYWNrVG9Ub3AnLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJ1xuICAgICwgcmVwbGFjZTogdHJ1ZVxuICAgICwgc2NvcGU6IHt9XG4gICAgLCB0ZW1wbGF0ZTogJzxkaXYgaWQ9XCJnb1RvVG9wXCIgY2xhc3M9XCJidG4gYnRuLWZsb2F0aW5nIHdhdmVzLWVmZmVjdCB3YXZlcy1saWdodFwiIG5nLWNsaWNrPVwidG9Ub3AoKVwiPjxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj5rZXlib2FyZF9hcnJvd191cDwvaT48L2Rpdj4nXG4gICAgLCBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCQodGhpcykuc2Nyb2xsVG9wKCkgPiAxMDApIHtcbiAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKCdzaG93Jyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcygnc2hvdycpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gNzUwKSB7XG4gICAgICAgICAgaWYgKCQodGhpcykuc2Nyb2xsVG9wKCkgPj0gJCh3aW5kb3cpLmhlaWdodCgpIC0gMSkge1xuICAgICAgICAgICAgZWxlbWVudC5hZGRDbGFzcygndXBmaXgnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKCd1cGZpeCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKCd1cGZpeCcpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHNjb3BlLnRvVG9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiaHRtbCwgYm9keVwiKS5hbmltYXRlKHtcbiAgICAgICAgICBzY3JvbGxUb3A6IDBcbiAgICAgICAgfSwgNjAwKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfTtcbiAgICB9XG4gIH1cbn0pOyIsImFwcC5kaXJlY3RpdmUoJ2Nhcm91c2VsJywgZnVuY3Rpb24gKCRpbnRlcnZhbCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICBzY29wZToge1xuICAgICAgaW1hZ2VBcnJheTogJz0nXG4gICAgfSxcbiAgICB0ZW1wbGF0ZVVybDogJy4vdmlld3MvZGlyZWN0aXZlcy9jYXJvdXNlbC5odG1sJyxcbiAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG5cbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIFxuICAgICAgc2NvcGUucGF1c2VkID0gZmFsc2U7XG4gICAgICBcbi8vICAgICAgc2NvcGUuZnVsbFNjcmVlbiA9IGZhbHNlO1xuXG4gICAgICBzY29wZS5jYXJvdXNlbEluZGV4ID0gMDtcblxuICAgICAgdmFyIGNhcm91c2VsVGltZSA9IDQ1MDA7XG5cbiAgICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoc2VsZi5jYXJvdXNlbCkge1xuICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwoc2VsZi5jYXJvdXNlbCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHNlbGYuY2Fyb3VzZWwgPSAkaW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChzY29wZS5wYXVzZWQpe1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzY29wZS5jYXJvdXNlbEluZGV4ICs9IDE7XG4gICAgICAgICAgaWYgKHNjb3BlLmltYWdlQXJyYXkubGVuZ3RoID09IHNjb3BlLmNhcm91c2VsSW5kZXgpIHtcbiAgICAgICAgICAgIHNjb3BlLmNhcm91c2VsSW5kZXggPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgY2Fyb3VzZWxUaW1lKTtcbiAgICAgIH1cblxuICAgICAgc2NvcGUuJHdhdGNoKCdpbWFnZUFycmF5JywgZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XG4gICAgICAgIGlmIChuZXdWYWx1ZSkge1xuICAgICAgICAgIGluaXQoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cblxuICAgICAgLyoqXG4gICAgICAgKiBUb2dnbGUgUGxheWJhY2sgZnVuY3Rpb24sIHN0YXJ0cy9wYXVzZXMgY2Fyb3VzZWxcbiAgICAgICAqIEBhdXRob3IgQnJhbmRvbiBHcm9mZlxuICAgICAgICovXG4gICAgICBzY29wZS50b2dnbGVQbGF5YmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2NvcGUucGF1c2VkID0gIXNjb3BlLnBhdXNlZDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLyoqXG4gICAgICAgKiBUb2dnbGUgRnVsbFNjcmVlbiBmdW5jdGlvbiwgZXhwYW5kcy9zaHJpbmtzIGNhcm91c2VsXG4gICAgICAgKiBAYXV0aG9yIEJyYW5kb24gR3JvZmZcbiAgICAgICAqL1xuLy8gICAgICBzY29wZS50b2dnbGVGdWxsc2NyZWVuID0gZnVuY3Rpb24gKCkge1xuLy8gICAgICAgIHNjb3BlLmZ1bGxTY3JlZW4gPSAhc2NvcGUuZnVsbFNjcmVlbjtcbi8vICAgICAgfVxuXG4gICAgfVxuICB9XG59KTsiLCJhcHAuZGlyZWN0aXZlKCdncmlkTGlzdCcsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHJlcGxhY2U6IHRydWUsXG4gICAgc2NvcGU6IHtcbiAgICAgIHByb2plY3Q6ICc9J1xuICAgIH0sXG4gICAgdGVtcGxhdGVVcmw6ICcuL3ZpZXdzL2RpcmVjdGl2ZXMvZ3JpZC1saXN0Lmh0bWwnLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycyl7XG4gICAgICBcbiAgICB9XG4gIH1cbn0pOyIsImFwcC5kaXJlY3RpdmUoJ2dyaWRUaWxlJywgZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICBzY29wZToge1xuICAgICAgcHJvamVjdDogJz0nXG4gICAgfSxcbiAgICB0ZW1wbGF0ZVVybDogJy4vdmlld3MvZGlyZWN0aXZlcy9ncmlkLXRpbGUuaHRtbCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKXtcbiAgICAgIFxuICAgIH1cbiAgfVxufSk7IiwiYXBwLmRpcmVjdGl2ZShcIm1BcHBMb2FkaW5nXCIsIGZ1bmN0aW9uICgkYW5pbWF0ZSwgJHJvb3RTY29wZSkge1xuXG4gIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcbiAgICAvLyBEdWUgdG8gdGhlIHdheSBBbmd1bGFySlMgcHJldmVudHMgYW5pbWF0aW9uIGR1cmluZyB0aGUgYm9vdHN0cmFwXG4gICAgLy8gb2YgdGhlIGFwcGxpY2F0aW9uLCB3ZSBjYW4ndCBhbmltYXRlIHRoZSB0b3AtbGV2ZWwgY29udGFpbmVyOyBidXQsXG4gICAgLy8gc2luY2Ugd2UgYWRkZWQgXCJuZ0FuaW1hdGVDaGlsZHJlblwiLCB3ZSBjYW4gYW5pbWF0ZWQgdGhlIGlubmVyXG4gICAgLy8gY29udGFpbmVyIGR1cmluZyB0aGlzIHBoYXNlLlxuICAgIC8vIC0tXG4gICAgLy8gTk9URTogQW0gdXNpbmcgLmVxKDEpIHNvIHRoYXQgd2UgZG9uJ3QgYW5pbWF0ZSB0aGUgU3R5bGUgYmxvY2suXG4gICAgJGFuaW1hdGUuZW5hYmxlZCh0cnVlKTtcblxuICAgICRyb290U2NvcGUuJHdhdGNoKCdlbmRBbmltYXRpb24nLCBmdW5jdGlvbiAobmV3VmFsKSB7XG4gICAgICBpZiAobmV3VmFsKSB7XG4gICAgICAgICRhbmltYXRlLmxlYXZlKGVsZW1lbnQuY2hpbGRyZW4oKS5lcSgxKSkudGhlbihcbiAgICAgICAgICBmdW5jdGlvbiBjbGVhbnVwQWZ0ZXJBbmltYXRpb24oKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIHJvb3QgZGlyZWN0aXZlIGVsZW1lbnQuXG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICAgICAgLy8gQ2xlYXIgdGhlIGNsb3NlZC1vdmVyIHZhcmlhYmxlIHJlZmVyZW5jZXMuXG4gICAgICAgICAgICBzY29wZSA9IGVsZW1lbnQgPSBhdHRyaWJ1dGVzID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgfTtcblxuXG4gIC8vIFJldHVybiB0aGUgZGlyZWN0aXZlIGNvbmZpZ3VyYXRpb24uXG4gIHJldHVybiAoe1xuICAgIGxpbms6IGxpbmssXG4gICAgcmVzdHJpY3Q6IFwiQ1wiXG4gIH0pO1xuICAvLyBJIGJpbmQgdGhlIEphdmFTY3JpcHQgZXZlbnRzIHRvIHRoZSBzY29wZS5cblxufSk7IiwiYXBwLmRpcmVjdGl2ZSgnbmF2aWdhdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHRyYW5zY2x1ZGU6IGZhbHNlLFxuICAgIHNjb3BlOiB7XG4gICAgICBwcm9qZWN0OiBcIj1cIlxuICAgIH0sXG4gICAgdGVtcGxhdGVVcmw6ICcuL3ZpZXdzL2RpcmVjdGl2ZXMvbmF2aWdhdGlvbi5odG1sJyxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpe1xuICAgICAgXG4gICAgfSxcbiAgICBjb250cm9sbGVyOiAnTmF2Q29udHJvbGxlcidcbiAgfVxufSk7IiwiYXBwLmZpbHRlcigncmF3SHRtbCcsIFsnJHNjZScsIGZ1bmN0aW9uICgkc2NlKSB7XG4gIHJldHVybiBmdW5jdGlvbiAodmFsKSB7XG4gICAgcmV0dXJuICRzY2UudHJ1c3RBc0h0bWwodmFsKTtcbiAgfTtcbn1dKTsiXX0=
